<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Cookie Manager - V1.0 - Edition</title>
    <link href="./static/css/style.css" rel="stylesheet">
    <link href="./static/css/anime.css" rel="stylesheet">
    <link href="./static/css/sidebar.css" rel="stylesheet">
</head>
<body>
<!-- ÂÖ®Â±ÄÂä†ËΩΩÂô® -->
<div class="global-loader" id="globalLoader">
    <div class="loader-content">
        <div class="kawaii-loader">
            <div class="cat-body"></div>
            <div class="cat-tail"></div>
        </div>
        <p>Loading nya~</p>
    </div>
</div>

<!-- ÈÄöÁü•ÂÆπÂô® -->
<div class="notification-container" id="notificationContainer"></div>

<!-- ËÉåÊôØË£ÖÈ•∞ -->
<div class="bg-decoration">
    <div class="sakura"></div>
    <div class="bubble"></div>
    <div class="star"></div>
</div>

<div class="container">
    <!-- Â§¥ÈÉ® -->
    <header class="main-header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">üç™</div>
                <h1 class="logo-text">
                    Cookie Manager
                    <span class="logo-subtitle">V1.0 - Edition</span>
                </h1>
            </div>
            <div class="stats-section">
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <span class="stat-label">ÊÄªËÆ°</span>
                        <span class="stat-value" id="totalCount">0</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ùå</div>
                    <div class="stat-info">
                        <span class="stat-label">Êó†Êïà</span>
                        <span class="stat-value" id="invalidCount">0</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Â∑•ÂÖ∑Ê†è -->
    <div class="toolbar">
        <div class="toolbar-actions">
            <div class="toolbar-group">
                <button class="btn btn-primary" onclick="cookieManager.showModal('addModal')">
                    <i class="icon-add"></i>
                    <span>Ê∑ªÂä†Cookie</span>
                </button>
                <button class="btn btn-success" onclick="cookieManager.showModal('batchAddModal')">
                    <i class="icon-batch"></i>
                    <span>ÊâπÈáèÊ∑ªÂä†</span>
                </button>
                <button class="btn btn-danger" onclick="cookieManager.deleteSelected()">
                    <i class="icon-delete"></i>
                    <span>Âà†Èô§ÈÄâ‰∏≠</span>
                </button>
                <button class="btn btn-warning" onclick="cookieManager.undoSelected()">
                    <i class="icon-undo"></i>
                    <span>Êí§ÈîÄÈÄâ‰∏≠</span>
                </button>
                <button class="btn btn-info" onclick="cookieManager.extractEmails()">
                    <i class="icon-email"></i>
                    <span>ÊèêÂèñÈÇÆÁÆ±</span>
                </button>
                <button class="btn btn-status" onclick="cookieManager.batchSetStatus()">
                    <i class="icon-status"></i>
                    <span>ÊâπÈáèÁä∂ÊÄÅ</span>
                </button>
                <button class="btn btn-secondary" onclick="cookieManager.refreshSessions()">
                    <i class="icon-refresh"></i>
                    <span>Âà∑Êñ∞</span>
                </button>
                <button class="btn btn-debug" onclick="cookieManager.toggleDebugMode()">
                    <i class="icon-debug"></i>
                    <span>Ë∞ÉËØï</span>
                </button>
            </div>
        </div>
        <div class="search-row">
            <div class="search-box">
                <input class="search-input"
                       id="searchInput"
                       placeholder="ÊêúÁ¥¢CookieÊàñÈÇÆÁÆ±..."
                       type="text">
                <i class="icon-search"></i>
            </div>
        </div>
    </div>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
    <div class="main-content">
        <div class="table-container">
            <table class="data-table">
                <thead>
                <tr>
                    <th width="50">
                        <div class="checkbox-wrapper">
                            <input class="checkbox-input" id="selectAll" type="checkbox">
                            <label class="checkbox-label" for="selectAll"></label>
                        </div>
                    </th>
                    <th width="80">Â∫èÂè∑</th>
                    <th width="250">ÈÇÆÁÆ±</th>
                    <th>CookieÈ¢ÑËßà</th>
                    <th width="120">Áä∂ÊÄÅ</th>
                    <th width="120">Êìç‰Ωú</th>
                </tr>
                </thead>
                <tbody id="sessionsBody">
                <!-- Âä®ÊÄÅÂÜÖÂÆπ -->
                </tbody>
            </table>
        </div>
        <!-- ÂàÜÈ°µÂÆπÂô® -->
        <div class="pagination-container" id="paginationContainer" style="display: none;">
            <div class="pagination-info">
                <span class="total-info">ÂÖ± <span id="totalItems">0</span> Êù°ËÆ∞ÂΩï</span>
                <div class="page-size-selector">
                    <label>ÊØèÈ°µÊòæÁ§∫Ôºö</label>
                    <select id="pageSizeSelect" onchange="cookieManager.changePageSize(this.value)">
                        <option value="10">10Êù°</option>
                        <option value="20">20Êù°</option>
                        <option value="50">50Êù°</option>
                        <option value="100">100Êù°</option>
                    </select>
                </div>
            </div>
            <div class="pagination-controls">
                <div class="loading-spinner"></div>
                <button class="page-btn page-first" onclick="cookieManager.goToFirstPage()" title="Á¨¨‰∏ÄÈ°µ">
                    <i class="icon-first">‚èÆ</i>
                </button>
                <button class="page-btn page-prev" onclick="cookieManager.goToPrevPage()" title="‰∏ä‰∏ÄÈ°µ">
                    <i class="icon-prev">‚óÄ</i>
                </button>
                <div class="page-numbers" id="pageNumbers"></div>
                <button class="page-btn page-next" onclick="cookieManager.goToNextPage()" title="‰∏ã‰∏ÄÈ°µ">
                    <i class="icon-next">‚ñ∂</i>
                </button>
                <button class="page-btn page-last" onclick="cookieManager.goToLastPage()" title="ÊúÄÂêé‰∏ÄÈ°µ">
                    <i class="icon-last">‚è≠</i>
                </button>
                <div class="page-jump">
                    <input id="pageJumpInput" min="1" placeholder="È°µÁ†Å" type="number">
                    <button class="page-btn page-go" onclick="cookieManager.jumpToPage()">Ë∑≥ËΩ¨</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Ê®°ÊÄÅÊ°Ü -->
<!-- Ê∑ªÂä†Cookie -->
<div class="modal" id="addModal">
    <div class="modal-wrapper">
        <div class="modal-content modal-wide">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="icon-cookie"></i>
                    Ê∑ªÂä†Cookie
                </h2>
                <button class="modal-close" onclick="cookieManager.closeModal('addModal')">
                    <i class="icon-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">ÂÆåÊï¥CookieÂÜÖÂÆπ</label>
                    <textarea class="form-textarea"
                              id="newCookie"
                              oninput="cookieManager.onCookieInput()"
                              placeholder="ËæìÂÖ•ÂÆåÊï¥ÁöÑCookieÂ≠óÁ¨¶‰∏≤..."
                              rows="3"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group flex-1">
                        <label class="form-label">DSÂ≠óÊÆµ</label>
                        <input class="form-input"
                               id="dsField"
                               oninput="cookieManager.onFieldInput()"
                               placeholder="DS token..."
                               type="text">
                    </div>
                    <div class="form-group flex-1">
                        <label class="form-label">DSRÂ≠óÊÆµ</label>
                        <input class="form-input"
                               id="dsrField"
                               oninput="cookieManager.onFieldInput()"
                               placeholder="DSR token..."
                               type="text">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Ê†ºÂºèÂåñÈ¢ÑËßà</label>
                    <div class="cookie-preview-box" id="cookiePreview">
                        <div class="preview-placeholder">ËæìÂÖ•CookieÂêéÂ∞ÜÊòæÁ§∫Ê†ºÂºèÂåñÈ¢ÑËßà</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="cookieManager.addSession()">
                    <i class="icon-check"></i>
                    Á°ÆËÆ§Ê∑ªÂä†
                </button>
                <button class="btn btn-secondary" onclick="cookieManager.closeModal('addModal')">
                    <i class="icon-close"></i>
                    ÂèñÊ∂à
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ÊâπÈáèÊ∑ªÂä† -->
<div class="modal" id="batchAddModal">
    <div class="modal-wrapper">
        <div class="modal-content modal-wide">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="icon-batch"></i>
                    ÊâπÈáèÊ∑ªÂä†Cookie
                </h2>
                <button class="modal-close" onclick="cookieManager.closeModal('batchAddModal')">
                    <i class="icon-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">CookieÂàóË°®ÔºàÊØèË°å‰∏Ä‰∏™Ôºâ</label>
                    <textarea class="form-textarea"
                              id="batchCookies"
                              oninput="cookieManager.onBatchInput()"
                              placeholder="ÊØèË°åËæìÂÖ•‰∏Ä‰∏™ÂÆåÊï¥ÁöÑCookie..."
                              rows="10"></textarea>
                    <div class="form-hint">
                        <span id="batchCount">0</span> ‰∏™Cookie
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="cookieManager.batchAddSessions()">
                    <i class="icon-check"></i>
                    ÊâπÈáèÊ∑ªÂä†
                </button>
                <button class="btn btn-secondary" onclick="cookieManager.closeModal('batchAddModal')">
                    <i class="icon-close"></i>
                    ÂèñÊ∂à
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ÁºñËæëCookie -->
<div class="modal" id="editModal">
    <div class="modal-wrapper">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="icon-edit"></i>
                    ÁºñËæëCookie
                </h2>
                <button class="modal-close" onclick="cookieManager.closeModal('editModal')">
                    <i class="icon-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">CookieÂÜÖÂÆπ</label>
                    <textarea class="form-textarea"
                              id="editCookie"
                              rows="6"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="cookieManager.updateSession()">
                    <i class="icon-save"></i>
                    ‰øùÂ≠ò‰øÆÊîπ
                </button>
                <button class="btn btn-secondary" onclick="cookieManager.closeModal('editModal')">
                    <i class="icon-close"></i>
                    ÂèñÊ∂à
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ÊâπÈáèËÆæÁΩÆÁä∂ÊÄÅÊ®°ÊÄÅÊ°Ü -->
<div class="modal" id="batchStatusModal">
    <div class="modal-wrapper">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="icon-status"></i>
                    ÊâπÈáèËÆæÁΩÆÁä∂ÊÄÅ
                </h2>
                <button class="modal-close" onclick="cookieManager.closeModal('batchStatusModal')">
                    <i class="icon-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">ÈÄâ‰∏≠ÁöÑÈÇÆÁÆ±</label>
                    <div class="selected-emails-list" id="selectedEmailsList">
                        <!-- Âä®ÊÄÅÊòæÁ§∫ÈÄâ‰∏≠ÁöÑÈÇÆÁÆ±ÂàóË°® -->
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Áä∂ÊÄÅËØ¥Êòé</label>
                    <input type="text"
                           id="batchStatusInput"
                           class="form-input"
                           placeholder="ÁïôÁ©∫Ë°®Á§∫ËÆæ‰∏∫ÊúâÊïà">
                    <div class="form-hint">
                        <div>Âø´Êç∑Áä∂ÊÄÅÔºö</div>
                        <div class="status-shortcuts">
                            <button class="status-shortcut" onclick="cookieManager.setStatusShortcut('Â∑≤Â§±Êïà')">Â∑≤Â§±Êïà</button>
                            <button class="status-shortcut" onclick="cookieManager.setStatusShortcut('Êó†ÊúâÊïàËÆ¢ÈòÖ')">Êó†ÊúâÊïàËÆ¢ÈòÖ</button>
                            <button class="status-shortcut" onclick="cookieManager.setStatusShortcut('Ë¥¶Âè∑Ë¢´Â∞ÅÁ¶Å')">Ë¥¶Âè∑Ë¢´Â∞ÅÁ¶Å</button>
                            <button class="status-shortcut" onclick="cookieManager.setStatusShortcut('ÂüüÂêçË¢´Â∞ÅÁ¶Å')">ÂüüÂêçË¢´Â∞ÅÁ¶Å</button>
                            <button class="status-shortcut" onclick="cookieManager.setStatusShortcut('')">Ê∏ÖÈô§Áä∂ÊÄÅ</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="cookieManager.saveBatchStatus()">
                    <i class="icon-save"></i>
                    ‰øùÂ≠ò
                </button>
                <button class="btn btn-secondary" onclick="cookieManager.closeModal('batchStatusModal')">
                    <i class="icon-close"></i>
                    ÂèñÊ∂à
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ËÑöÊú¨Êñá‰ª∂ -->
<script src="./static/js/auth-helper.js"></script>
<script src="./static/js/debug-logger.js"></script>
<script src="./static/js/api.js"></script>
<script src="./static/js/ui.js"></script>
<script src="./static/js/cookie-manager.js"></script>
<script src="./static/js/sidebar.js"></script>
</body>
</html>